// Copyright Â© SixtyFPS GmbH <info@slint.dev>
// SPDX-License-Identifier: MIT
import { Palette } from "std-widgets.slint";

struct ButtonColors  {
    base: color,
    pressed: color,
    hovered: color,
}

struct ModeColors {
    background: color,
    primary: color,
    secondary: color,
    text-primary: color,
    text-secondary: color,
    destructive: color,
}

export global DemoPalette  {
    out property <color> background: #2d2d32;
    out property <color> primary: #141313;
    out property <color> secondary: #FFBF63;
    out property <color> text-primary: #F4F6FF;
    out property <color> text-secondary: #F4F6FF;
    out property <color> destructive: #FF3B30;

    // Fixed (non-themeable) colors
    out property <color> push-button-text-color: white;

    // Color of the home/settings/ink buttons on the left side bar
    out property <color> active-page-icon-color: #6284FF;
    out property <color> inactive-page-icon-color: #BDC0D1;
    out property <color> neutral-box: #BDC0D1;
    out property <color> secondary-foreground-color:#C1C3CA;

    // Color used for the border / outline of items that can be clicked on, such as the
    // "Print"/"Scan" buttons, the printer queue items (for expansion) or controls such
    // as the combo box or spin box.
    out property <color> control-secondary: #6284FF;
    out property <color> control-foreground: white;  // FIXME: the night mode color was not part of the design
    out property <color> primary-push-button-base: #6284FF;
    out property <ButtonColors> primary-push-button-colors: {
        base: root.primary-push-button-base,
        pressed: root.primary-push-button-base.darker(40%),
        hovered: root.primary-push-button-base.darker(20%),
    };
    out property <color> secondary-push-button-base: destructive;
    out property <ButtonColors> secondary-push-button-colors: {
        base: root.secondary-push-button-base,
        pressed: root.secondary-push-button-base.darker(40%),
        hovered: root.secondary-push-button-base.darker(20%),
    };

    out property <length> base-font-size: 16px;
    out property <length> button-width: 130px;
    out property <length> button-height: button-width + 30px;
    out property <length> side-bar-width: 50px;
    // out property <length> side-bar-margin: 0px;

}

export component Page inherits Rectangle {
    in property <string> header <=> h.text;
    in property <bool> has-back-button: false;

    callback back;

    background: DemoPalette.background;
    // Stop accidentally getting clicks dur to animation only moving page half way offscreen
    visible: self.opacity > 0;

    TouchArea { } // protect underneath controls

    // if (root.has-back-button) : Image {
    //     x:0;
    //     source: @image-url("images/home.svg");
    //     image-fit: contain;
    //     colorize: DemoPalette.control-secondary;
    //     y: h.y + (h.height - self.height) / 2;
    //     width: 14px;
    //     height: 24px;
    
    //     TouchArea {
    //         clicked => { root.back() }
    
    //         x: -14px;
    //         height: 200%;
    //         width: self.height;
    //     }
    // }

    h := Text {
        font-weight: 900;
        font-size: DemoPalette.base-font-size * 2;
        color: DemoPalette.text-primary;
        y: 46px - self.font-size;
        x: root.has-back-button ? 24px + 16px : 0px;
        // Allow clicking on the title as well to get back easier when just
        // using fingers on a small screen.
        if (root.has-back-button) : TouchArea {
            clicked => { root.back() }
        }
    }
}
